
DDL: CREATE TABLE T1 (ID INT)
DDL: CREATE UNIQUE INDEX T1_UQ ON T1 (ID)
DDL: CREATE GLOBAL TEMPORARY TABLE T2 (ID INT) ON COMMIT PRESERVE ROWS
DDL: CREATE UNIQUE INDEX T2_UQ ON T2 (ID)
DDL: CREATE GLOBAL TEMPORARY TABLE T3 (ID INT) ON COMMIT DELETE ROWS
DDL: CREATE UNIQUE INDEX T3_UQ ON T3 (ID)
DDL: COMMIT
---- One attachment, PERSISTENT ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx1: INSERT INTO T1 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx2: INSERT INTO T1 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T1_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T1 VALUES (2)
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx2: SELECT COUNT(*) FROM T1
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T1
tx1: count = 2
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx3: SELECT COUNT(*) FROM T1
tx3: count = 2
tx3: DELETE FROM T1
tx3: COMMIT
----


---- One attachment, GTT + PRESERVE ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx1: INSERT INTO T2 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx2: INSERT INTO T2 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T2_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T2 VALUES (2)
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx2: SELECT COUNT(*) FROM T2
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T2
tx1: count = 2
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T2
tx3: count = 2
tx3: DELETE FROM T2
tx3: COMMIT
----


---- One attachment, GTT + DELETE ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx1: INSERT INTO T3 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx2: INSERT INTO T3 VALUES (1)
tx2: INSERT INTO T3 VALUES (2)
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx2: SELECT COUNT(*) FROM T3
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T3
tx3: count = 0
tx3: DELETE FROM T3
tx3: COMMIT
----


---- Two attachments, PERSISTENT ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx1: INSERT INTO T1 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx2: INSERT INTO T1 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T1_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T1 VALUES (2)
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx2: SELECT COUNT(*) FROM T1
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T1
tx1: count = 2
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx3: SELECT COUNT(*) FROM T1
tx3: count = 2
tx3: DELETE FROM T1
tx3: COMMIT
----


---- Two attachments, GTT + PRESERVE ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx1: INSERT INTO T2 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx2: INSERT INTO T2 VALUES (1)
tx2: INSERT INTO T2 VALUES (2)
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx2: SELECT COUNT(*) FROM T2
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T2
tx3: count = 1
tx3: DELETE FROM T2
tx3: COMMIT
----


---- Two attachments, GTT + DELETE ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx1: INSERT INTO T3 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx2: INSERT INTO T3 VALUES (1)
tx2: INSERT INTO T3 VALUES (2)
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx2: SELECT COUNT(*) FROM T3
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T3
tx3: count = 0
tx3: DELETE FROM T3
tx3: COMMIT
----



---- One attachment, PERSISTENT ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx1: INSERT INTO T1 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT
tx2: INSERT INTO T1 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T1_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T1 VALUES (2)
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx2: SELECT COUNT(*) FROM T1
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T1
tx1: count = 2
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx3: SELECT COUNT(*) FROM T1
tx3: count = 2
tx3: DELETE FROM T1
tx3: COMMIT
----


---- One attachment, GTT + PRESERVE ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx1: INSERT INTO T2 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx2: INSERT INTO T2 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T2_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T2 VALUES (2)
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx2: SELECT COUNT(*) FROM T2
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T2
tx1: count = 2
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T2
tx3: count = 2
tx3: DELETE FROM T2
tx3: COMMIT
----


---- One attachment, GTT + DELETE ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx1: INSERT INTO T3 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx2: INSERT INTO T3 VALUES (1)
tx2: INSERT INTO T3 VALUES (2)
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx2: SELECT COUNT(*) FROM T3
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T3
tx3: count = 0
tx3: DELETE FROM T3
tx3: COMMIT
----


---- Two attachments, PERSISTENT ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx1: INSERT INTO T1 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT
tx2: INSERT INTO T1 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T1_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T1 VALUES (2)
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx2: SELECT COUNT(*) FROM T1
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T1
tx1: count = 2
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx3: SELECT COUNT(*) FROM T1
tx3: count = 2
tx3: DELETE FROM T1
tx3: COMMIT
----


---- Two attachments, GTT + PRESERVE ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx1: INSERT INTO T2 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx2: INSERT INTO T2 VALUES (1)
tx2: INSERT INTO T2 VALUES (2)
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx2: SELECT COUNT(*) FROM T2
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T2
tx3: count = 1
tx3: DELETE FROM T2
tx3: COMMIT
----


---- Two attachments, GTT + DELETE ----

tx1: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx1: INSERT INTO T3 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx2: INSERT INTO T3 VALUES (1)
tx2: INSERT INTO T3 VALUES (2)
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx2: SELECT COUNT(*) FROM T3
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T3
tx3: count = 0
tx3: DELETE FROM T3
tx3: COMMIT
----



---- One attachment, PERSISTENT ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT
tx1: INSERT INTO T1 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx2: INSERT INTO T1 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T1_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T1 VALUES (2)
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx2: SELECT COUNT(*) FROM T1
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT
tx3: SELECT COUNT(*) FROM T1
tx3: count = 2
tx3: DELETE FROM T1
tx3: COMMIT
----


---- One attachment, GTT + PRESERVE ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx1: INSERT INTO T2 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx2: INSERT INTO T2 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T2_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T2 VALUES (2)
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx2: SELECT COUNT(*) FROM T2
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T2
tx3: count = 2
tx3: DELETE FROM T2
tx3: COMMIT
----


---- One attachment, GTT + DELETE ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx1: INSERT INTO T3 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx2: INSERT INTO T3 VALUES (1)
tx2: INSERT INTO T3 VALUES (2)
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx2: SELECT COUNT(*) FROM T3
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T3
tx3: count = 0
tx3: DELETE FROM T3
tx3: COMMIT
----


---- Two attachments, PERSISTENT ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT
tx1: INSERT INTO T1 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT
tx2: INSERT INTO T1 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T1_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T1 VALUES (2)
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx2: SELECT COUNT(*) FROM T1
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT
tx3: SELECT COUNT(*) FROM T1
tx3: count = 2
tx3: DELETE FROM T1
tx3: COMMIT
----


---- Two attachments, GTT + PRESERVE ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx1: INSERT INTO T2 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx2: INSERT INTO T2 VALUES (1)
tx2: INSERT INTO T2 VALUES (2)
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx2: SELECT COUNT(*) FROM T2
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T2
tx3: count = 1
tx3: DELETE FROM T2
tx3: COMMIT
----


---- Two attachments, GTT + DELETE ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx1: INSERT INTO T3 VALUES (1)
tx2: SET TRANSACTION READ COMMITTED RECORD_VERSION NO WAIT READ ONLY
tx2: INSERT INTO T3 VALUES (1)
tx2: INSERT INTO T3 VALUES (2)
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx2: SELECT COUNT(*) FROM T3
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T3
tx3: count = 0
tx3: DELETE FROM T3
tx3: COMMIT
----



---- One attachment, PERSISTENT ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT
tx1: INSERT INTO T1 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT
tx2: INSERT INTO T1 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T1_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T1 VALUES (2)
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx2: SELECT COUNT(*) FROM T1
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT
tx3: SELECT COUNT(*) FROM T1
tx3: count = 2
tx3: DELETE FROM T1
tx3: COMMIT
----


---- One attachment, GTT + PRESERVE ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx1: INSERT INTO T2 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx2: INSERT INTO T2 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T2_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T2 VALUES (2)
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx2: SELECT COUNT(*) FROM T2
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T2
tx3: count = 2
tx3: DELETE FROM T2
tx3: COMMIT
----


---- One attachment, GTT + DELETE ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx1: INSERT INTO T3 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx2: INSERT INTO T3 VALUES (1)
tx2: INSERT INTO T3 VALUES (2)
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx2: SELECT COUNT(*) FROM T3
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T3
tx3: count = 0
tx3: DELETE FROM T3
tx3: COMMIT
----


---- Two attachments, PERSISTENT ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT
tx1: INSERT INTO T1 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT
tx2: INSERT INTO T1 VALUES (1)
	attempt to store duplicate value (visible to active transactions) in unique index "T1_UQ"
	Problematic key value is ("ID" = 1)

tx2: INSERT INTO T1 VALUES (2)
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx2: SELECT COUNT(*) FROM T1
tx2: count = 1
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T1
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT
tx3: SELECT COUNT(*) FROM T1
tx3: count = 2
tx3: DELETE FROM T1
tx3: COMMIT
----


---- Two attachments, GTT + PRESERVE ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx1: INSERT INTO T2 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx2: INSERT INTO T2 VALUES (1)
tx2: INSERT INTO T2 VALUES (2)
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx2: SELECT COUNT(*) FROM T2
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T2
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T2
tx3: count = 1
tx3: DELETE FROM T2
tx3: COMMIT
----


---- Two attachments, GTT + DELETE ----

tx1: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx1: INSERT INTO T3 VALUES (1)
tx2: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx2: INSERT INTO T3 VALUES (1)
tx2: INSERT INTO T3 VALUES (2)
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx2: SELECT COUNT(*) FROM T3
tx2: count = 2
tx2: COMMIT
tx1: SELECT COUNT(*) FROM T3
tx1: count = 1
tx1: COMMIT
tx3: SET TRANSACTION SNAPSHOT NO WAIT READ ONLY
tx3: SELECT COUNT(*) FROM T3
tx3: count = 0
tx3: DELETE FROM T3
tx3: COMMIT
----




Finished ER43_TRAN: TOTAL ERRORS: 0
